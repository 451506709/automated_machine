<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF51 IoT SDK: Creating IPv6 addresses</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 IoT SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00034.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Creating IPv6 addresses </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#iot_sdk_user_guides_ipv6_address_creation_build_step3_mac_to_ipv6">MAC to IPv6 Script</a></li>
<li class="level1"><a href="#iot_sdk_user_guides_ipv6_address_creation_intro">Link-Local addresses</a></li>
<li class="level1"><a href="#iot_sdk_user_guides_ipv6_address_creation_build">Creating an IPv6 Link-Local address</a><ul><li class="level2"><a href="#iot_sdk_user_guides_ipv6_address_creation_build_step1">Step 1. Creating a Modified EUI-64 address</a></li>
<li class="level2"><a href="#iot_sdk_user_guides_ipv6_address_creation_build_step2">Step 2. Creating an IID</a></li>
<li class="level2"><a href="#iot_sdk_user_guides_ipv6_address_creation_build_step3">Step 3. Creating a Link-Local address</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This user guide explains how to create an IPv6 address and its interface identifier (IID) from the <em>Bluetooth</em> Device address. You should be familiar with the IPv6 addressing model as defined in specification <a href="http://tools.ietf.org/html/rfc4291">RFC4291</a> to understand the following content.</p>
<h1><a class="anchor" id="iot_sdk_user_guides_ipv6_address_creation_build_step3_mac_to_ipv6"></a>
MAC to IPv6 Script</h1>
<p>The following script provides an automatic transformation between <em>Bluetooth</em> device addresses and IPv6 addresses.</p>
 
<script src="mac2ipv6.js"></script>
<script src="jquery.caret.js"></script>
<script>
        $(function(){
            $('#mac').macAddress();
            $('#prefix').prefixAddress();
            $('#ipv6').ipv6Address();
        });
</script>

<table>
<form style="width:300px; margin-left:15px;">
<tr>
<td>
    MAC:
</td>
<td>
    <input type="text" name="mac" id="mac" class="mac2ipv6-control" style="padding:6px;border:1px solid #000;">
</td>
</tr>
<tr>
<td>
    Prefix:
</td>
<td>
    <input type="text" name="prefix" id="prefix" class="mac2ipv6-control" style="padding:6px;border:1px solid #000;">
</td>
</tr>
<tr>
<td>
    IPv6:
</td>
<td>
    <input type="text" name="ipv6" id="ipv6" class="mac2ipv6-control" maxlen="39" size="39" style="padding:6px;border:1px solid #000;">
</td>
</tr>
</form>
</table>
<br />
<h1><a class="anchor" id="iot_sdk_user_guides_ipv6_address_creation_intro"></a>
Link-Local addresses</h1>
<p>Link-Local addresses are designed to be used for addressing on a single link for purposes such as automatic address configuration or when no routers are present. Routers are not allowed to forward any packets with Link-Local source or destination addresses to other links. Therefore, to communicate with the outside world, global address must be created; see <a class="el" href="a00038.html">RADVD for Linux</a> for instructions on how to do that.</p>
<p>Link-Local addresses contain the prefix <b>FE80::/10</b> and a 64-bit interface identifier (IID). The Link-Local address is automatically assigned to the interface and has a similar role like an IPv4 local address, for example, 192.168.0.0/16.</p>
<h1><a class="anchor" id="iot_sdk_user_guides_ipv6_address_creation_build"></a>
Creating an IPv6 Link-Local address</h1>
<p>Creating an IPv6 link local address includes three steps:</p>
<ol type="1">
<li>Transforming the <em>Bluetooth</em> device address into Modified EUI-64 format</li>
<li>Transforming the Modified EUI-64 address into an IID</li>
<li>Transforming the IID into a Link-Local address</li>
</ol>
<p>For example, consider the following 48-bit public <em>Bluetooth</em> address: <b>00:11:22:33:44:55</b></p>
<div class="image">
<img src="lla_1.png" alt="lla_1.png"/>
<div class="caption">
Figure 1. Bluetooth device address.</div></div>
 <h2><a class="anchor" id="iot_sdk_user_guides_ipv6_address_creation_build_step1"></a>
Step 1. Creating a Modified EUI-64 address</h2>
<p>The first step is to extend the 48-bit address to a 64-bit address, which is used as MAC address in IPv6. To do this, you must add the bytes <b>0xFF</b> and <b>0xFE</b> in the middle of the 48-bit address.</p>
<div class="image">
<img src="lla_2.png" alt="lla_2.png"/>
<div class="caption">
Figure 2. Modified EUI-64 address.</div></div>
 <h2><a class="anchor" id="iot_sdk_user_guides_ipv6_address_creation_build_step2"></a>
Step 2. Creating an IID</h2>
<p>The second step is to set the address as globally unique. This is done by flipping the seventh bit of the first byte. The same result is achieved by an XOR operation with a <b>0x02</b> value on the first octet. The resulting ID is the interface identifier.</p>
<div class="image">
<img src="lla_3.png" alt="lla_3.png"/>
<div class="caption">
Figure 3. Interface ID.</div></div>
 <h2><a class="anchor" id="iot_sdk_user_guides_ipv6_address_creation_build_step3"></a>
Step 3. Creating a Link-Local address</h2>
<p>The last step is to add the Link-Local prefix <b>FE80::/10</b> to the IID.</p>
<div class="image">
<img src="lla_4.png" alt="lla_4.png"/>
<div class="caption">
Figure 4. Link-Local address.</div></div>
<p> So the Link-Local address for the <em>Bluetooth</em> device address <b>00:11:22:33:44:55</b> is <b>FE80:0000:0000:0000:0211:22FF:FE33:4455</b>, or simpler <b>FE80::211:22FF:FE33:4455</b>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00043.html">User Guides</a></li>
    <li class="footer">Generated on Wed Dec 17 2014 14:08:22 for nRF51 IoT SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
